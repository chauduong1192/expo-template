import { type BottomTabBarProps } from '@react-navigation/bottom-tabs';
import { Tabs } from 'expo-router';
import Animated from 'react-native-reanimated';
import { Path, G } from 'react-native-svg';

import { CompassIcon, GamePadIcon, HomeSimpleIcon } from '@/components/Icons';
import { Svg } from '@/components/Icons/AnimatedIcons/Svg';
import { TabBar } from '@/components/TabBar';
import { type TabBarIconProps } from '@/components/TabBar/TabItem';

export const TAB_NAME = ['Home', 'Discover', 'Game'];
export const ICONS = [<HomeSimpleIcon />, <CompassIcon />, <GamePadIcon />];

const AnimatedPath = Animated.createAnimatedComponent(Path);
const tabBars = [
  {
    name: 'home',
    href: '/home',
    tabBarIcon: ({ animatedProps }: TabBarIconProps) => (
      <Svg>
        <AnimatedPath
          animatedProps={animatedProps}
          d="M27.3538 12.9713L17.3538 3.53626C17.3489 3.532 17.3443 3.5274 17.34 3.52251C16.9718 3.18768 16.492 3.00214 15.9944 3.00214C15.4967 3.00214 15.0169 3.18768 14.6488 3.52251L14.635 3.53626L4.64625 12.9713C4.4425 13.1586 4.27985 13.3862 4.16861 13.6397C4.05737 13.8932 3.99996 14.167 4 14.4438V26C4 26.5304 4.21071 27.0392 4.58579 27.4142C4.96086 27.7893 5.46957 28 6 28H26C26.5304 28 27.0391 27.7893 27.4142 27.4142C27.7893 27.0392 28 26.5304 28 26V14.4438C28 14.167 27.9426 13.8932 27.8314 13.6397C27.7201 13.3862 27.5575 13.1586 27.3538 12.9713ZM26 26H6V14.4438L6.01375 14.4313L16 5.00001L25.9875 14.4288L26.0012 14.4413L26 26Z"
        />
      </Svg>
    ),
  },
  {
    name: 'discover',
    href: '/discover',
    tabBarIcon: ({ animatedProps }: TabBarIconProps) => (
      <Svg>
        <AnimatedPath
          animatedProps={animatedProps}
          d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.1909C6.63975 6.61935 4.97351 8.64968 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.75141 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5995 28.9944 20.9749 28.0104C23.3503 27.0265 25.3807 25.3603 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24882 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM16 27C13.8244 27 11.6977 26.3549 9.88873 25.1462C8.07979 23.9375 6.66989 22.2195 5.83733 20.2095C5.00477 18.1995 4.78693 15.9878 5.21137 13.854C5.63581 11.7202 6.68345 9.7602 8.22183 8.22183C9.76021 6.68345 11.7202 5.6358 13.854 5.21136C15.9878 4.78692 18.1995 5.00476 20.2095 5.83733C22.2195 6.66989 23.9375 8.07979 25.1462 9.88873C26.3549 11.6977 27 13.8244 27 16C26.9967 18.9164 25.8367 21.7123 23.7745 23.7745C21.7123 25.8367 18.9164 26.9967 16 27ZM21.5525 9.105L13.5525 13.105C13.3591 13.2022 13.2022 13.3591 13.105 13.5525L9.10501 21.5525C9.02869 21.705 8.99264 21.8745 9.0003 22.0449C9.00795 22.2153 9.05905 22.3808 9.14874 22.5259C9.23843 22.671 9.36373 22.7907 9.51272 22.8736C9.66172 22.9566 9.82946 23.0001 10 23C10.1552 22.9998 10.3084 22.9638 10.4475 22.895L18.4475 18.895C18.6409 18.7978 18.7979 18.6409 18.895 18.4475L22.895 10.4475C22.9894 10.2597 23.0222 10.0469 22.9887 9.83933C22.9552 9.6318 22.8572 9.4401 22.7085 9.29146C22.5599 9.14282 22.3682 9.0448 22.1607 9.01132C21.9531 8.97785 21.7403 9.01063 21.5525 9.105ZM17.25 17.25L12.2363 19.7638L14.75 14.75L19.7688 12.2413L17.25 17.25Z"
        />
      </Svg>
    ),
  },
  {
    name: 'game',
    href: '/game',
    tabBarIcon: ({ animatedProps }: TabBarIconProps) => (
      <Svg height={26} viewBox="0 0 21 20" width={26}>
        <G clip-path="url(#clip0_4088_57387)" id="Frame">
          <AnimatedPath
            animatedProps={animatedProps}
            d="M1.00003 9.16675H19.3334M1.00003 9.16675V18.3334H19.3334V9.16675M1.00003 9.16675V5.83341C1.00003 4.72835 1.43902 3.66854 2.22042 2.88714C3.00182 2.10573 4.06163 1.66675 5.1667 1.66675H15.1667C15.7139 1.66675 16.2557 1.77452 16.7612 1.98392C17.2667 2.19331 17.7261 2.50023 18.113 2.88714C18.4999 3.27405 18.8068 3.73338 19.0162 4.2389C19.2256 4.74442 19.3334 5.28624 19.3334 5.83341V9.16675M6.00003 1.66675V9.16675M14.3334 1.66675V9.16675"
            strokeLinejoin="round"
            strokeWidth="1.5"
          />
          <AnimatedPath
            animatedProps={animatedProps}
            d="M10.1667 10.8334V12.5001M6.83334 9.16675H13.5V14.1667H6.83334V9.16675Z"
            strokeLinejoin="round"
            strokeWidth="1.5"
          />
        </G>
      </Svg>
    ),
    tabBarBadge: 3,
  },
  // This route just for develop
  {
    name: 'showcase',
    href: '/showcase',
    tabBarIcon: ({ animatedProps }: TabBarIconProps) => (
      <Svg>
        <AnimatedPath
          animatedProps={animatedProps}
          d="M16 10C14.8133 10 13.6533 10.3519 12.6666 11.0112C11.6799 11.6705 10.9108 12.6076 10.4567 13.7039C10.0026 14.8003 9.88377 16.0067 10.1153 17.1706C10.3468 18.3344 10.9182 19.4035 11.7574 20.2427C12.5965 21.0818 13.6656 21.6532 14.8295 21.8847C15.9933 22.1162 17.1997 21.9974 18.2961 21.5433C19.3925 21.0892 20.3295 20.3201 20.9888 19.3334C21.6481 18.3467 22 17.1867 22 16C21.9983 14.4092 21.3657 12.8841 20.2408 11.7592C19.1159 10.6343 17.5908 10.0017 16 10ZM16 20C15.2089 20 14.4355 19.7654 13.7777 19.3259C13.1199 18.8864 12.6072 18.2617 12.3045 17.5308C12.0017 16.7998 11.9225 15.9956 12.0769 15.2197C12.2312 14.4437 12.6122 13.731 13.1716 13.1716C13.731 12.6122 14.4437 12.2312 15.2196 12.0769C15.9956 11.9225 16.7998 12.0017 17.5307 12.3045C18.2616 12.6072 18.8863 13.1199 19.3259 13.7777C19.7654 14.4355 20 15.2089 20 16C20 17.0609 19.5786 18.0783 18.8284 18.8284C18.0783 19.5786 17.0609 20 16 20ZM29.7425 13.4013C29.7146 13.2604 29.6568 13.1273 29.5729 13.0108C29.489 12.8943 29.381 12.7973 29.2562 12.7263L25.5275 10.6013L25.5125 6.39877C25.512 6.25403 25.4802 6.11112 25.4191 5.97991C25.358 5.84869 25.2692 5.7323 25.1587 5.63877C23.8062 4.49464 22.2485 3.61785 20.5687 3.05502C20.4365 3.01024 20.2963 2.99367 20.1572 3.00637C20.0181 3.01908 19.8832 3.06077 19.7612 3.12877L16 5.23127L12.235 3.12502C12.1129 3.05664 11.9779 3.01463 11.8386 3.00171C11.6993 2.98879 11.5588 3.00525 11.4262 3.05002C9.74768 3.61696 8.19186 4.4971 6.84124 5.64377C6.73095 5.73716 6.64222 5.85336 6.58115 5.98434C6.52008 6.11533 6.48813 6.258 6.48749 6.40252L6.46874 10.6088L2.73999 12.7338C2.61525 12.8048 2.50725 12.9018 2.42335 13.0183C2.33944 13.1348 2.2816 13.2679 2.25374 13.4088C1.91249 15.1236 1.91249 16.8889 2.25374 18.6038C2.2816 18.7446 2.33944 18.8778 2.42335 18.9942C2.50725 19.1107 2.61525 19.2077 2.73999 19.2788L6.46874 21.4038L6.48374 25.6063C6.4842 25.751 6.51606 25.8939 6.57714 26.0251C6.63821 26.1563 6.72704 26.2727 6.83749 26.3663C8.19008 27.5104 9.74769 28.3872 11.4275 28.95C11.5598 28.9948 11.7 29.0114 11.8391 28.9987C11.9781 28.986 12.113 28.9443 12.235 28.8763L16 26.7688L19.765 28.875C19.914 28.958 20.0819 29.0011 20.2525 29C20.3617 29 20.4702 28.9823 20.5737 28.9475C22.2521 28.3813 23.8079 27.502 25.1587 26.3563C25.269 26.2629 25.3578 26.1467 25.4188 26.0157C25.4799 25.8847 25.5119 25.742 25.5125 25.5975L25.5312 21.3913L29.26 19.2663C29.3847 19.1952 29.4927 19.0982 29.5766 18.9817C29.6605 18.8653 29.7184 18.7321 29.7462 18.5913C30.0856 16.8778 30.0843 15.1143 29.7425 13.4013ZM27.8675 17.765L24.2962 19.7963C24.1398 19.8852 24.0102 20.0148 23.9212 20.1713C23.8487 20.2963 23.7725 20.4288 23.695 20.5538C23.5958 20.7114 23.5429 20.8938 23.5425 21.08L23.5237 25.1113C22.5638 25.8651 21.4944 26.4679 20.3525 26.8988L16.75 24.8913C16.6004 24.8085 16.4322 24.7655 16.2612 24.7663H16.2375C16.0862 24.7663 15.9337 24.7663 15.7825 24.7663C15.6036 24.7618 15.4267 24.8049 15.27 24.8913L11.665 26.9038C10.5206 26.4762 9.44827 25.8763 8.48499 25.125L8.47124 21.1C8.47063 20.9134 8.4178 20.7307 8.31874 20.5725C8.24124 20.4475 8.16499 20.3225 8.09374 20.19C8.0054 20.0311 7.87585 19.899 7.71874 19.8075L4.14374 17.7713C3.95874 16.601 3.95874 15.409 4.14374 14.2388L7.70874 12.2038C7.86522 12.1148 7.99477 11.9852 8.08374 11.8288C8.15624 11.7038 8.23249 11.5713 8.30999 11.4463C8.4092 11.2886 8.46204 11.1063 8.46249 10.92L8.48124 6.88877C9.44115 6.13495 10.5106 5.53217 11.6525 5.10127L15.25 7.10877C15.4066 7.19555 15.5836 7.23872 15.7625 7.23377C15.9137 7.23377 16.0662 7.23377 16.2175 7.23377C16.3964 7.23824 16.5732 7.1951 16.73 7.10877L20.335 5.09627C21.4794 5.52386 22.5517 6.12369 23.515 6.87502L23.5287 10.9C23.5294 11.0866 23.5822 11.2694 23.6812 11.4275C23.7587 11.5525 23.835 11.6775 23.9062 11.81C23.9946 11.9689 24.1241 12.101 24.2812 12.1925L27.8562 14.2288C28.0437 15.3999 28.0458 16.5932 27.8625 17.765H27.8675Z"
        />
      </Svg>
    ),
  },
];

export default function TabLayout() {
  const renderTabBar = (props: BottomTabBarProps) => <TabBar {...props} />;

  return (
    <Tabs
      screenOptions={{
        headerShown: false,
      }}
      tabBar={renderTabBar}
    >
      {tabBars.map(({ name, href, tabBarIcon, tabBarBadge }) => (
        <Tabs.Screen
          key={name}
          name={name}
          options={{ href, tabBarLabel: name, tabBarIcon, tabBarBadge }}
        />
      ))}
    </Tabs>
  );
}
